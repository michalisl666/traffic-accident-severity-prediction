# Ανάλυση Τροχαίων Ατυχημάτων στην Αττική Οδό (2014-2024)

Αυτός ο φάκελος περιέχει τον πηγαίο κώδικα και τα σχετικά αρχεία που αναπτύχθηκαν για την ανάλυση του πρωτογενούς συνόλου δεδομένων από την Αττική Οδό, στα πλαίσια της διπλωματικής εργασίας με θέμα την πρόβλεψη της έκβασης τροχαίων ατυχημάτων.

## Περιγραφή του Project

Σε αντίθεση με τη μελέτη περίπτωσης των ΗΠΑ, η ανάλυση για την Αττική Οδό επικεντρώθηκε στην αντιμετώπιση των προκλήσεων που προκύπτουν από ένα **μικρό, αλλά υψηλής ποιότητας, πρωτογενές σύνολο δεδομένων**. Η έμφαση δόθηκε στην **εντατική μηχανική χαρακτηριστικών (feature engineering)** και τον **εμπλουτισμό των δεδομένων** από εξωτερικές πηγές, με απώτερο σκοπό την αύξηση της πληροφοριακής πυκνότητας κάθε καταγραφής.

Οι κύριοι στόχοι ήταν:
1.  Η πρόβλεψη της **σοβαρότητας** του ατυχήματος (Θανατηφόρο έναντι Τραυματισμού).
2.  Η πρόβλεψη της **διάρκειας** του συμβάντος (π.χ., Μικρή έναντι Μεγάλης Διάρκειας), μιας κρίσιμης επιχειρησιακής μετρικής.
3.  Η διερεύνηση της αποτελεσματικότητας διαφόρων τεχνικών Μηχανικής Μάθησης σε ένα περιβάλλον περιορισμένων και ανισόρροπων δεδομένων.

## Δομή και Ροή Εργασιών

Η ανάλυση για την Αττική Οδό είναι πιο σύνθετη και χωρίζεται σε διακριτά, επαναληπτικά βήματα (iterations), όπως αποτυπώνεται στα scripts.

### 1. Εμπλουτισμός Δεδομένων (Data Augmentation)

*   **`ao_data_augmentation_pipe.py`**: Αυτό το script αποτελεί το θεμέλιο της ανάλυσης. Εκτελεί τις παρακάτω κρίσιμες λειτουργίες:
    *   **Ενοποίηση Δεδομένων**: Συνδυάζει τα αρχικά φύλλα Excel (Θανατηφόρα & Με Τραυματισμό) σε ένα ενιαίο DataFrame.
    *   **Γεωκωδικοποίηση (Geocoding)**: Αντιστοιχίζει τις περιγραφικές θέσεις των ατυχημάτων (π.χ., "Α", 25.5 χλμ.) σε ακριβείς γεωγραφικές συντεταγμένες (πλάτος/μήκος).
    *   **Εμπλουτισμός από Εξωτερικά API**:
        *   **Open-Meteo API**: Αντλεί λεπτομερή ωριαία καιρικά δεδομένα για την τοποθεσία και τον χρόνο κάθε ατυχήματος.
        *   **OpenStreetMap (OSM)**: Αξιοποιεί τις συντεταγμένες για να αντλήσει χαρακτηριστικά του οδικού δικτύου (αριθμός λωρίδων, όρια ταχύτητας, κ.λπ.).
    *   **`curves.py`** (Καλείται από το `ao_data_augmentation_pipe.py`): Αυτό το εξειδικευμένο script περιέχει τις συναρτήσεις για την ανάλυση της γεωμετρίας του δρόμου. Υπολογίζει την **καμπυλότητα**, τη γωνία και την κατεύθυνση των στροφών, καθώς και άλλες σχετικές μετρικές, αναλύοντας τις αξονικές γραμμές της Αττικής Οδού.
    *   **Υπολογισμός Αποστάσεων**: Υπολογίζει τις αποστάσεις από κρίσιμα σημεία ενδιαφέροντος (Σταθμοί Διοδίων, Κόμβοι).
    *   **Δημιουργία Χρονικών Χαρακτηριστικών**: Παράγει προηγμένα χρονικά χαρακτηριστικά.

    Το αποτέλεσμα αυτού του script είναι ένα **εμπλουτισμένο αρχείο CSV (`augmented_accidents_data_final.csv`)**, το οποίο αποτελεί την είσοδο για τα επόμενα στάδια.

### 2. Στατιστική Ανάλυση και Μοντέλο Βάσης (Baseline)

*   **`baseline.py`**: Πριν την εφαρμογή σύνθετων μοντέλων, αυτό το script εκτελεί μια προκαταρκτική ανάλυση για να θέσει ένα σημείο αναφοράς (baseline):
    *   Επιλέγει ένα μικρό σύνολο από τα **πιο βασικά, μη-επεξεργασμένα χαρακτηριστικά**.
    *   Εφαρμόζει κλασικούς στατιστικούς ελέγχους (Chi-squared, T-test) για να διερευνήσει τη σχέση αυτών των βασικών παραγόντων με την έκβαση του ατυχήματος.
    *   Εκπαιδεύει ένα απλό μοντέλο **Λογιστικής Παλινδρόμησης** ως σημείο αναφοράς για την απόδοση, αναδεικνύοντας την ανάγκη για πιο προηγμένες τεχνικές.

### 3. Επαναληπτική Μοντελοποίηση (Iterative Modeling)

*   **`another_copy_of_iterative_progressive_outcome.ipynb`**: Αυτό το notebook εστιάζει στην πρόβλεψη της **σοβαρότητας** (Θανατηφόρο/Τραυματισμός). Υλοποιεί μια πλήρη, επαναληπτική διαδικασία που περιλαμβάνει:
    *   Διαχωρισμό των εμπλουτισμένων δεδομένων σε σύνολα εκπαίδευσης, επικύρωσης και ελέγχου.
    *   Εφαρμογή προηγμένης χωρικής μηχανικής χαρακτηριστικών (Geohashing, KDE).
    *   Εφαρμογή ενός αγωγού προεπεξεργασίας (imputation, scaling, one-hot encoding).
    *   Επιλογή χαρακτηριστικών με τη μέθοδο RFECV.
    *   Συστηματικό πειραματισμό με πολλαπλές τεχνικές εξισορρόπησης δεδομένων (SMOTE, ADASYN, κ.λπ.).
    *   Εκπαίδευση, αξιολόγηση και σύγκριση διαφόρων αλγορίθμων (Logistic Regression, RandomForest, XGBoost, RUSBoost).
    *   Βελτιστοποίηση του κατωφλίου απόφασης (threshold tuning) και τελική αξιολόγηση στο σύνολο ελέγχου.

*   **`iterative_progressive_duration.ipynb`**: Αυτό το notebook ακολουθεί μια παρόμοια επαναληπτική δομή, αλλά εστιάζει στην πρόβλεψη της **διάρκειας** του ατυχήματος.
    *   Ορίζει τη μεταβλητή-στόχο μετατρέποντας τη συνεχή διάρκεια σε μια δυαδική κατηγορία με βάση διάφορα κατώφλια (διάμεσος, 75ο, 90ο ποσοστημόριο).
    *   Εφαρμόζει στοχευμένη μηχανική χαρακτηριστικών βασισμένη στην ανάλυση σφαλμάτων της προηγούμενης επανάληψης για να βελτιώσει την απόδοση του μοντέλου.

## Οδηγίες Εκτέλεσης

Η ανάλυση πρέπει να εκτελεστεί με την παρακάτω σειρά. Συνιστάται η χρήση Google Colaboratory.

1.  **Εκτελέστε το `ao_data_augmentation_pipe.py`**:
    *   Αυτό το script θα επεξεργαστεί το αρχικό αρχείο Excel (`Τροχαία ατυχήματα ΑΟ 2014_2024.xlsx`) και τα αρχεία GeoJSON (`attiki_merged_6666666.geojson`, `toll_stations.json`, `komvoi_coords.json`, `aocenterlines.json`).
    *   Βεβαιωθείτε ότι όλα τα παραπάνω αρχεία βρίσκονται στη σωστή διαδρομή στο Google Drive σας.
    *   Το script θα παράγει το τελικό, εμπλουτισμένο αρχείο `augmented_accidents_data_final.csv`.

2.  **Εκτελέστε το `baseline.py` (Προαιρετικό αλλά Συνιστάται)**:
    *   Αυτό το script χρησιμοποιεί το `augmented_accidents_data_final.csv` για να παράγει τα αποτελέσματα του μοντέλου βάσης, παρέχοντας ένα σημείο σύγκρισης για τις πιο σύνθετες μεθόδους.

3.  **Εκτελέστε τα Notebooks Μοντελοποίησης**:
    *   Ανοίξτε το `another_copy_of_iterative_progressive_outcome.ipynb` (για σοβαρότητα) ή το `iterative_progressive_duration.ipynb` (για διάρκεια).
    *   Βεβαιωθείτε ότι η μεταβλητή `file_path` στην αρχή του notebook δείχνει στο `augmented_accidents_data_final.csv`.
    *   Εκτελέστε τα κελιά με τη σειρά για να αναπαράγετε την επαναληπτική διαδικασία μοντελοποίησης.

## Κύρια Ευρήματα

Η ανάλυση έδειξε ότι ενώ η πρόβλεψη των εξαιρετικά σπάνιων θανατηφόρων ατυχημάτων ήταν δύσκολη (χαμηλή στατιστική ισχύς), η πρόβλεψη της **διάρκειας** των συμβάντων ήταν σημαντικά πιο επιτυχής. Το μοντέλο **RUSBoostClassifier** επέδειξε την καλύτερη απόδοση στην πρόβλεψη της διάρκειας, παρέχοντας ένα πρακτικά χρήσιμο εργαλείο για την υποστήριξη των επιχειρησιακών αποφάσεων του φορέα διαχείρισης. Τα αποτελέσματα υπογραμμίζουν τη σημασία του **εμπλουτισμού δεδομένων** και της επιλογής μιας **προβλέψιμης και πρακτικά χρήσιμης μεταβλητής-στόχου** όταν εργαζόμαστε με μικρά σύνολα δεδομένων.
